log_init()
setwd("C:/Users/oluwa/OneDrive/Documents/HONOURS PAPER WFP/Measuring_Food_Security_F2F_RPipeline")
log_init()
# Bootstrap renv + packages
if (!requireNamespace("renv", quietly = TRUE)) install.packages("renv")
options(repos = c(CRAN = "https://cran.r-project.org"))
renv::activate()
needed <- c(
"tidyverse","data.table","haven","labelled","janitor","stringr","lubridate",
"fixest","sandwich","clubSandwich","estimatr","broom","broom.helpers",
"modelsummary","gt","writexl","readxl","kableExtra","ggplot2","ggdist","patchwork","here","MASS"
)
try(renv::restore(prompt = FALSE), silent = TRUE)
miss <- setdiff(needed, rownames(installed.packages()))
log_msg("00_setup.R complete")
source("code/utils.R")
log_init()
log_msg("Hello world")
log_init()
source("code/utils.R")
log_msg("Hello world")
suppressPackageStartupMessages({
library(tidyverse)
library(data.table)
library(janitor)
library(stringr)
library(broom)
library(broom.helpers)
library(modelsummary)
library(gt)
library(here)
})
# Declare required packages (will be installed/recorded into lock)
pkgs <- c("tidyverse","data.table","haven","labelled","janitor","stringr","lubridate",
"fixest","sandwich","clubSandwich","estimatr","broom","broom.helpers",
"modelsummary","gt","writexl","readxl","kableExtra","ggplot2","ggdist","patchwork","here","MASS")
# code/01_prepare.R -------------------------------------------------------------
suppressPackageStartupMessages({
library(tidyverse); library(data.table); library(haven); library(labelled)
library(janitor); library(stringr); library(lubridate); library(here)
})
# Pretty table
bal_tbl <- bal %>%
mutate(across(where(is.numeric), ~ round(.x, 3))) %>%
select(variable, mean_F2F, sd_F2F, mean_Remote, sd_Remote, diff, p_value)
source("~/HONOURS PAPER WFP/Measuring_Food_Security_F2F_RPipeline/code/02_descriptives.R")
gt_tbl <- bal_tbl %>% gt() %>%
tab_header(title = "Table 1. Baseline Balance by Modality") %>%
fmt_number(columns = where(is.numeric), decimals = 3)
# Write TeX (via gtsave to .tex) and Excel
write_tex(gt_tbl, here::here("output","tables","Table1_Balance.tex"))
# code/02_descriptives.R --------------------------------------------------------
suppressPackageStartupMessages({
library(tidyverse); library(data.table); library(modelsummary); library(gt); library(here)
})
source(here::here("code","utils.R")); log_msg("02_descriptives: start")
analytic <- readRDS(here::here("output","intermediate","analytic_harmonized.rds"))
